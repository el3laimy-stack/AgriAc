<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import org.kordamp.ikonli.javafx.FontIcon?>

<VBox spacing="15.0" styleClass="report-container" stylesheets="@../css/new-theme.css" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="accounting.controller.ExpenseManagementController">
   <children>
      <!-- Header -->
      <HBox alignment="CENTER_LEFT" styleClass="report-header">
         <children>
            <FontIcon iconLiteral="fa-credit-card" iconSize="24" styleClass="text-danger" />
            <Label styleClass="title-lg" text="إدارة المصروفات" />
         </children>
      </HBox>

      <!-- Filter and Actions Bar -->
      <VBox styleClass="card">
         <children>
            <HBox alignment="CENTER_LEFT" spacing="10.0">
               <children>
                  <Label text="من:" />
                  <DatePicker fx:id="fromDatePicker" />
                  <Label text="إلى:" />
                  <DatePicker fx:id="toDatePicker" />
                  <Button fx:id="filterButton" onAction="#handleFilter" text="بحث" />
                  <HBox alignment="CENTER_RIGHT" HBox.hgrow="ALWAYS">
                     <children>
                        <Button fx:id="newExpenseButton" onAction="#handleNewExpense" styleClass="success" text="تسجيل مصروف جديد">
                           <graphic>
                              <FontIcon iconLiteral="fa-plus" />
                           </graphic>
                        </Button>
                     </children>
                  </HBox>
               </children>
            </HBox>
         </children>
      </VBox>

      <!-- Expenses Table -->
      <TableView fx:id="expenseTable" VBox.vgrow="ALWAYS">
         <columns>
            <TableColumn fx:id="dateColumn" prefWidth="120.0" text="التاريخ" />
            <TableColumn fx:id="descriptionColumn" prefWidth="350.0" text="البيان" />
            <TableColumn fx:id="categoryColumn" prefWidth="150.0" text="الفئة" />
            <TableColumn fx:id="amountColumn" prefWidth="150.0" text="المبلغ" />
            <TableColumn fx:id="actionsColumn" prefWidth="100.0" text="إجراءات" />
         </columns>
         <columnResizePolicy>
            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
         </columnResizePolicy>
      </TableView>

      <!-- Totals Footer -->
      <HBox alignment="CENTER_RIGHT" styleClass="total-row-final">
         <children>
            <Label fx:id="totalExpensesLabel" styleClass="total-value" text="الإجمالي: 0.00" />
         </children>
      </HBox>
   </children>
</VBox>
