# خطة تطوير وتحديث واجهة المستخدم لتطبيق المحاسبة الزراعية

## مقدمة

تهدف هذه الخطة إلى إعادة هيكلة وتطوير واجهة المستخدم (UI) وتجربة المستخدم (UX) للتطبيق لجعله أكثر احترافية وسهولة في الاستخدام. ترتكز الخطة على تجميع الوظائف المتشابهة، تبسيط سير العمل، وتوحيد تجربة المستخدم عبر جميع شاشات التطبيق.

---

## المرحلة الأولى: إعادة هيكلة شريط التنقل الرئيسي

**الهدف:** التخلص من قائمة الأزرار الطويلة والمزدحمة واستبدالها بنظام قوائم منسدلة (Accordion) لتنظيم الوصول إلى وظائف التطبيق.

**خطوات التنفيذ:**

1.  **تعديل `main.fxml`:**
    *   استبدال `VBox` الحالي الذي يحتوي على الأزرار بعنصر `Accordion`.
    *   إنشاء `TitledPane` لكل مجموعة رئيسية (العمليات اليومية، المخزون، البيانات الأساسية، التقارير).
    *   نقل الأزرار ذات الصلة إلى `VBox` داخل كل `TitledPane`.
2.  **تعديل `MainController.java`:**
    *   تحديث متغيرات `@FXML` لتعكس الهيكل الجديد (Accordion و TitledPanes).
    *   إزالة دوال `onAction` الخاصة بالأزرار التي سيتم نقلها (مثل `handleNewSale`).
3.  **تحديث `application.css`:**
    *   إضافة أنماط CSS مخصصة لعناصر `Accordion` و `TitledPane` لضمان تناسقها مع التصميم العام للتطبيق.

---

## المرحلة الثانية: تحسين وحدات الإدخال (المصروفات والسندات)

**الهدف:** تحويل نماذج الإدخال المتكررة إلى نوافذ منبثقة (Modal Dialogs) سريعة بدلاً من شاشات كاملة، وتحسين سياق استخدامها.

**خطوات التنفيذ:**

1.  **وحدة المصروفات:**
    *   **إنشاء شاشة `ExpenseManagement.fxml`:** تصميم شاشة جديدة تحتوي على جدول لعرض المصروفات مع فلاتر تاريخ وفئة.
    *   **إضافة زر "تسجيل مصروف جديد"** في شاشة `ExpenseManagement.fxml`.
    *   **تعديل `ExpenseFormController.java`:** التأكد من أنه يعمل بشكل صحيح كنافذة منبثقة.
    *   **تعديل `ExpenseManagementController.java`:** إضافة دالة لفتح `ExpenseForm.fxml` كـ `Modality.WINDOW_MODAL`.
2.  **سندات الصرف والقبض:**
    *   **إزالة الزر من `main.fxml`:** حذف زر "سند صرف/قبض" من شريط التنقل.
    *   **إضافة أزرار جديدة:** إضافة زر "سند صرف/قبض جديد" في `JournalView.fxml` و `dashboard.fxml`.
    *   **تعديل `JournalViewController.java` و `DashboardController.java`:** إضافة دوال لفتح `PaymentForm.fxml` كنافذة منبثقة (Modal).

---

## المرحلة الثالثة: توحيد تجربة عرض التقارير

**الهدف:** إنشاء مركز تقارير موحد يوفر تجربة سلسة ومتكاملة بدلاً من فتح نوافذ متفرقة.

**خطوات التنفيذ:**

1.  **حذف `SimplifiedReportsDashboard.fxml`:** لم نعد بحاجة إليه.
2.  **إنشاء شاشة `ReportsDashboard.fxml` جديدة:**
    *   تصميم الشاشة باستخدام `TilePane` أو `GridPane` لعرض "بطاقة" لكل تقرير.
    *   كل بطاقة ستحتوي على اسم التقرير، وصف بسيط، وحقول الإدخال الخاصة به (مثل نطاق التاريخ).
3.  **إنشاء `ReportsDashboardController.java` جديد:**
    *   كتابة دوال `onAction` لكل بطاقة تقرير.
    *   عند النقر على زر "إنشاء" في البطاقة، ستقوم الدالة بتحميل ملف الـ FXML الخاص بالتقرير المطلوب (مثل `IncomeStatementView.fxml`) في منطقة المحتوى الرئيسية (`contentArea`) في `main.fxml`.
4.  **تعديل `MainController.java`:** التأكد من أن زر "التقارير" في شريط التنقل الجديد يقوم بتحميل شاشة `ReportsDashboard.fxml` الجديدة.

---

## المرحلة الرابعة: تحسينات عامة ورؤية مستقبلية

**الهدف:** تطبيق أفضل الممارسات في التصميم وتجهيز التطبيق لمميزات مستقبلية.

**خطوات التنفيذ:**

1.  **إضافة أزرار الإجراءات السياقية:**
    *   إضافة زر "إضافة فاتورة بيع" في شاشة `SaleHistoryView.fxml`.
    *   إضافة زر "إضافة فاتورة شراء" في شاشة `PurchaseHistoryView.fxml`.
    *   تعديل وحدات التحكم الخاصة بهذه الشاشات لتنفيذ الإجراء.
2.  **تعزيز التقارير برسوم بيانية:**
    *   تعديل `IncomeStatementView.fxml` لإضافة `PieChart` بجانب جدول المصروفات.
    *   تعديل `BalanceSheetView.fxml` لإضافة `BarChart` لمقارنة الأصول والخصوم.
    *   تحديث وحدات التحكم الخاصة بها لجلب البيانات وتعبئة الرسوم البيانية.
3.  **تطبيق نظام الإشعارات:**
    *   استبدال نوافذ `Alert` الخاصة بتأكيد النجاح (مثل "تم الحفظ بنجاح") بنظام إشعارات غير مزعج (مثل مكتبة ControlsFX) في وحدات التحكم الخاصة بنماذج الإدخال.
4.  **الاستعداد للوضع الليلي (Dark Mode):**
    *   إنشاء ملف `dark-theme.css` جديد.
    *   إضافة قائمة في شاشة الإعدادات (المستقبلية) تسمح للمستخدم بالتبديل بين `application.css` و `dark-theme.css`.
